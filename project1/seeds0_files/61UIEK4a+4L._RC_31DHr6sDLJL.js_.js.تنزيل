(function(v){var r=window.AmazonUIPageJS||window.P,ea=r._namespace||r.attributeErrors,h=ea?ea("DetailPageImageBlockAssets",""):r;h.guardFatal?h.guardFatal(v)(h,window):h.execute(function(){v(h,window)})})(function(v,r,ea){v.register("postMetric",function(){return{postCountMetric:function(h){if("undefined"!==typeof h){var a=r.ue;if(a){var b=a.count(h)||0;a.count(h,b+1)}}},postTimeMetric:function(h,a){if("undefined"!==typeof h&&"undefined"!==typeof a){var b=r.ue;b&&b.count(h,a)}},emitNexusMetric:function(h){r.ue&&
ue.event&&ue.event(h,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(h,a,b,g,l,c,n,d){return{eventSource:"IBCarousel",placementContext:d,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:h,intPayload:a,videoAsin:b,videoAsinList:"",groupType:g,pageUrl:l,pageAsin:c,weblabIds:n}}}});"use strict";v.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});v.register("postEarlyMetric",function(){return null});"use strict";
v.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(h,a,b,g){h=h.extend(!0,{},b,g);var l=new a(h);v.register("ImageBlockAPI",function(){return l.api});return l});"use strict";v.when("A","jQuery").execute(function(h,a){h.on("a:image:load:landingImage",function(){r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});h.loadDynamicImage(a("#landingImage"))});"use strict";v.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(h){function a(b){b&&(v.load.js(b),r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",r.parseInt(performance.now())))}function b(b){b&&v.load.css(b)}var g=h.airyConfig;g===ea?v.when("ImageBlockBTF").execute(function(h){g=h.airyConfig;a(g.jsUrl);b(g.cssUrl)}):(a(g.jsUrl),b(g.cssUrl))});"use strict";v.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(h,
a,b,g,l){var c={};return function(n){var d=this;d.dispatch=function(b,a){var d=c[b];g.isDefined(d)&&h.each(d,function(b,c){c.call(r,a)})};d.register=function(b,a){g.isDefined(c[b])||(c[b]=[]);"function"===typeof a&&c[b].push(a)};d.model=new a(n,d);d.view=new b(n,d,d.model);d.api=new l(n,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";v.when("A","imageBlockUtils").register("ImageBlockModel",function(h,a){function b(b,c,d,h,g,n){a.isDefined(b)&&(m.type=b);a.isDefined(c)&&
(m.index=c);a.isDefined(d)&&(m.thumbnailIndex=d);a.isDefined(h)&&(m.variant=h);a.isDefined(g)&&(m.color=g);m.shoppableScene=n||null}function g(a){b("image",0,0,"MAIN",a||d.landingAsinColor||d.defaultColor,null)}function l(a){a=a.data;N=h.copy(m);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function c(b){l(b);b=h.copy(b);b.data=h.copy(m);q.dispatch("updateView",b)}function n(){N=h.copy(m);g(m.color)}var d,q,m={},N={},G,r;return function(b,a){q=a;d=b;q.register("updateSelection",
c);q.register("updateModel",l);q.register("resetModel",n);this.init=function(){g()};this.getCurrentItem=function(){return h.copy(m)};this.getPreviousItem=function(){return h.copy(N)};this.setCurrentEvent=function(b){G=b};this.getCurrentEvent=function(){return G};this.setImmersiveViewModalInstance=function(b){r=b};this.getImmersiveViewModalInstance=function(){return r};this.updateTitle=function(b){d.title=b}}});"use strict";v.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(h,
a){function b(b,a,g,d,q){function m(b){"click"===b.type&&d.postCountMetric("thumbClick");"click"===b.type&&t.overrideAltImageClickAction?x.dispatch("thumbActionClick",b):x.dispatch("updateSelection",b)}function N(b){t.useClickZoom||x.dispatch("imageClick",b)}function G(b){t.useClickZoom||x.dispatch("imageHover",b)}function J(b){x.dispatch("button360Click",b)}function y(a){!g.isDefined(a)||"swatchClick"!==a.type&&"updatedData"!==a.type?(p.update(a),"swatchHover"!==a.type&&A.getPreviousItem().thumbnailIndex!==
a.data.thumbnailIndex&&d.postCountMetric(a.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",a.data)):(p.render(a.data.color,!1,a.onload),a={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",a))}function D(b){x.dispatch("resize",b)}function L(b){g.selectThumbnail(b,C)}function K(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function O(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===h.useIV?v.when("a-modal").execute(function(){K()}):K();t.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter","mouseleave"],m);b.declarative("thumb-action",["click"],
m);b.declarative("main-image-click",["click"],N);b.declarative("main-image-click",["mouseenter","mouseleave"],G);b.declarative("button-360-click",["click"],J);b.on("resize",D)}function Q(b){var a=b.data,c;a&&"ingress"!==a.type&&"click"===b.type&&(c=b);return c}function f(b){var a=A.getCurrentItem(),c={type:"click"};c.$declarativeParent=b;c.data=a;return c}var p,t,x,A,C;return function(b,d,h){p=this;t=b;x=d;A=h;C=a("#imageBlock #altImages ul");var g=a("#imageBlock .canvas"),k=a("#main-image-container"),
e;p.subViews=[];for(d=0;d<q.length;d++)p.subViews.push(new q[d](b,h,p,x));p.render=function(b,d,h){var n=0;C.find(".item").remove();b=b||A.getCurrentItem().color;a.each(p.subViews,function(e,a){n=a.render(b,n,g,C,k,d,h)||n});var l=C.find(".a-button-selected").closest(".a-declarative");e=f(l)};p.init=function(){C=a("#imageBlock #altImages ul");var b=C.find(".a-button-selected").closest(".a-declarative"),e=b.data("action"),b=b.data(e)||{};b.color=t.landingAsinColor||t.defaultColor;x.dispatch("updateModel",
{data:b});p.render(b.color,!0);t.isDebug&&r.console&&console.log(t);x.register("updateView",y);x.register("selectThumbnail",L);O()};p.update=function(b){a.each(p.subViews,function(e,a){a.update(b)});t.usePeekHover&&("mouseleave"===b.type?x.dispatch("updateSelection",e):"click"===b.type&&(e=Q(b)||e))}}}var g=["A","jQuery","imageBlockUtils","postMetric"].concat(h.views);v.when.apply(v,g).register("ImageBlockView",function(){for(var a=arguments[0],c=arguments[1],h=arguments[2],d=arguments[3],g=[],m=
4,N=arguments.length;m<N;m++)g.push(arguments[m]);return b(a,c,h,d,g)})});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(h,a,b,g,l,c,n){function d(c,f,k,e){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var E=t.getCurrentItem();if(!e||"chromeless-video"!==E.type||!p.autoplayVideo){e=0;"image"===E.type&&(e=Math.max(G(E.color,E.variant),0));var d=f+e;d>=k&&(e=0,d=f);
f=b.getImageHash(E.color,e,p);-1!==f&&(x.dispatch("updateModel",{data:{index:e,thumbnailIndex:d,variant:f.variant,type:"image",shoppableScene:f.shoppableScene}}),f=c.find(".item").get(d),b.selectGivenThumbnail(a(f),c))}}}function q(f,h,k){h=p.colorImages&&p.colorImages[h];var e=f;b.isDefined(h)&&(a.each(h,function(e,a){f<p.maxAlts&&(b.createThumbnail({type:"image",index:e,thumbnailIndex:f,variant:a.variant,shoppableScene:a.shoppableScene},a.thumb,A,"imageThumbnail"),f++)}),c.isEnabled&&n.logAltImgRequestPlacedOnThumbnails(a,
c,t),d(A,e,f,k));return f}function m(f,c){if("image"===f.type){var k=a("#image-canvas-caption #canvasCaption"),e,d=p.staticStrings,h=p.colorImages,g=f.color,n=f.index;b.isShoppableScenesEnabled()&&f.shoppableScene?e=d.clickSceneTagsToShopProducts:c&&p.useIV?e=d.clickToExpand:h[g]&&h[g][n].hiRes&&p.useHoverZoom?(e=p.useHoverZoomIpad?d.touchToZoom:p.useClickZoom?d.clickToZoom:d.rollOverToZoom,p.hoverZoomIndicator&&(e="\x3cimg src\x3d'"+p.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+e)):p.useIV&&(e=
d.clickToExpand);k.html(e)}}function N(){C.find("li").removeClass("selected");a("#image-canvas-caption #canvasCaption").empty();b.hideUnavailable()}function G(a,f){return b.getIndexForVariant(a,f,p)}function r(f,c){var k="a-dynamic-image";if(!p.acEnabled){var e;a.each(f.main,function(a,k){b.isDefined(e)||(e=parseFloat(k[1]/k[0])<=parseFloat(p.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});k+=e}var d=b.getMaxDimensionsOfMainImage(f.main,H,p),h=d[0],g=d[1],d=a("\x3cdiv\x3e\x3c/div\x3e"),
h={"max-height":h,"max-width":g};d.addClass(k).css(h).attr({"data-old-hires":f.hiRes,"data-a-manual-replacement":"true",onload:c}).data("a-dynamic-image",f.main);return d}function y(b){var a=H.css("height");null!==a&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected");p.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(p.imgTagWrapperClasses)}function D(a,f){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(f)&&l.postCountMetric("mainImageUpdateOnTwisterVariationClick");
var k=b.getImageHash(a.color,a.index,p);if(-1===k)return k={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},K(a)||(x.dispatch("updateModel",k),b.showUnavailable(a.color)),-1;var e=C.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(e)){var e=a.thumbnailIndex,d=r(k,f),g;if(b.isShoppableScenesEnabled()&&k.shoppableScene){g="desktop-dp-atf-ib-shoppablescenes-tags-"+e;"function"==typeof uet&&uet("bb",g,{wb:1});d.attr("data-a-image-name","shoppable-scene");var z=C.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
z.addClass("celwidget").attr("cel_widget_id",g);z.children("span").css("display","inline-block");x.dispatch("initialize-shoppable-scene",{index:e,shoppableScene:k.shoppableScene,imageSource:k.hiRes||k.large||k.lowRes,$tagPlaceholder:z.find(".mirai-scene-tag-placeholder"),$viewProductsButton:z.find(".mirai-scene-view-products-button")});"function"==typeof uet&&uet("cf",g,{wb:1});g=z}else g=C.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");g.addClass("image item itemNo"+
e+" maintain-height");g.find(".placeHolder").replaceWith(d);C.find(".list").append(g);h.loadImageManually(d);e=g}y(e);x.dispatch("loadMagnifier");m(a);p.useIV&&b.isDefined(k.hiRes)&&e.css("cursor","pointer");a.isUserGenerated&&(e=t.getPreviousItem(),d=a.variant,b.isDefined(d)&&e.thumbnailIndex!==a.thumbnailIndex&&(c.isEnabled&&n.logAltImgRequestServed(c),l.postCountMetric("ImageThumbnailSelectedVariant:"+d),0===d.indexOf("IG")&&(l.postCountMetric("IGImageSelectedVariant:"+d),l.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));h.trigger("dp:image-block:update",k)}}function L(){a("#imageBlock").css("opacity","1");C.css("opacity","1");b.spinner(C,!1)}function K(a){return b.lazyLoadingRequired(a,t,p)}function O(){var f=C.find(".item .imgTagWrapper"),c=b.getContainerHeight(H,p.holderRatio,p.holderMaxHeight);0<c&&(H.height(c),f.height(c));C.find("img.a-dynamic-image").each(function(){var k=a(this);k.data("a-manual-replacement")&&h.loadDynamicImage(this);var e=k.data("a-dynamic-image"),e=b.getMaxDimensionsOfMainImage(e,
H,p);k.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function Q(b){m(t.getCurrentItem(),"mouseenter"===b.type)}var f,p,t,x,A,C,H,w;h.on("triggerImageAjax",function(a){var f=t.getCurrentItem().color;p.colorImages[f]||(p.colorImages[f]=a);a={type:"updatedData",data:t.getCurrentItem()};x.dispatch("updateView",a);(f=p.colorToAsin[f])&&f.asin&&v.register(b.rankedImagesReadyEvent(f.asin))});return function(a,c,k,e){f=this;p=a;t=c;x=e;p.colorImages[p.landingAsinColor]=p.colorImages[p.defaultColor];
f.render=function(b,a,e,k,f,c,d){C=e;A=k;H=f;w=q(a,b,c);c||(b=t.getCurrentItem(),K(b)&&x.dispatch("updateModel",{data:{type:"lazy-loaded"}}));b=t.getCurrentItem();c=!c;K(b)||(L(),N(),c&&C.find(".list .item").remove());D(t.getCurrentItem(),d);return w};f.update=function(a){var e=a.data;t.setCurrentEvent(a);"ingress"===e.type||K(a.data)||(L(),N());if("swatchHover"===a.type)if(e.color===t.getCurrentItem().color)D(t.getCurrentItem());else{if(!a.captured){var k;k=Math.max(G(e.color,t.getCurrentItem().variant),
0);k=b.getImageHash(e.color,k,p);if(-1===k)K(e)||b.showUnavailable(e.color),k=-1;else{var e=C.find(".swatchHoverExp"),f=r(k);e.find(".imgTagWrapper").html(f);h.loadImageManually(f);l.postCountMetric("mainImageUpdateOnTwisterVariationHover");y(e);h.trigger("dp:image-block:update",k);k=void 0}-1!==k&&(a.captured=!0)}}else"image"===e.type&&(e.interaction=a.type,e.isUserGenerated=!0,"mouseenter"===a.type&&l.postCountMetric("dpcc_imageThumbHovered_"+(e.thumbnailIndex+1)+"_"+w),D(e),p.usePeekHover&&"click"!==
a.type||(b.selectGivenThumbnail(a.$declarativeParent,A),"click"===a.type&&(l.postCountMetric("dpcc_imageThumbClicked_total"),l.postCountMetric("dpcc_imageThumbClicked_"+(e.thumbnailIndex+1)+"_"+w))))};p.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");x.register("imageHover",Q);x.register("resize",O)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(h,a,b,g,l,c){function n(a){K?
a.css("cursor","url('"+G.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function d(a){var c=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(c))for(var c=c[1].split("_"),f=0;f<c.length;f++){var d=c[f].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(d)&&(a[d[1]]=parseInt(d[2],10))}return a}function q(m,q){function f(){var a;q.useClickZoom?(a=q.offsetInClickZoom,a=[Math.min(1,Math.max(0,E[0]-(z[0]+a))/(z[2]-2*
a)),Math.min(1,Math.max(0,E[1]-(z[1]+a))/(z[3]-2*a))]):a=e&&e.updatePosition();if(a&&k&&k.detailSize){var b=[k.detailSize[0]-k.rect.width,k.detailSize[1]-k.rect.height];h.capabilities.rtl?k.detailImage.get(0).style.right=-(a[0]*b[0])+"px":k.detailImage.get(0).style.left=-(a[0]*b[0])+"px";k.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function p(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function t(b){var e=T?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";
E=T?[e.pageX,e.pageY]:[b.pageX,b.pageY];if(h.capabilities.rtl){var k=a(r).width();E=T?[k-e.pageX,e.pageY]:[k-b.pageX,b.pageY]}}function x(a){T&&a.preventDefault();t(a);q.useClickZoom?a=[z[0],z[1],z[0]+z[2],z[1]+z[3]]:(a=e?e.offset:m.offsetParent().offset(),a=G.acEnabled?[a.left,a.top,y.width()+a.left,y.height()+a.top]:[F[0]+a.left,F[1]+a.top,F[0]+F[2]+a.left,F[1]+F[3]+a.top]);E[0]<a[0]||E[1]<a[1]||E[0]>=a[2]||E[1]>=a[3]||G.acEnabled&&!p(m)?(q.fadeMagnifier?V||(V=!0,fa=setTimeout(function(){A(!0)},
500)):q.useClickZoom||A(),B&&(B=!1,clearTimeout(ba))):(B||(B=!0,ba=setTimeout(function(){g.postCountMetric("dppc_hoverZoomOpened");l.isEnabled&&c.logHoverZoomRequestServed(l)},1E3)),q.fadeMagnifier&&V&&(V=!1,clearTimeout(fa)),f())}function A(b){b&&w.suppressMagnifier(!0);if(J&&(k&&k.hide(),e&&(e.destroy(),e=null),J=!1,T?(m.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
N(),b))m.one("click.magnifier touchstart.magnifier",function(a){C(a,!0)})}function C(b,c){c&&w.suppressMagnifier(!1);if(!J&&!X&&(0===aa&&(g.postCountMetric("dppc_hoverTime",new Date-(r.ue&&r.ue.t0||0)),aa=1),ma[U]||(g.postCountMetric("dppc_hoverMain"),ma[U]=1),F=[m.position().left,m.position().top,m.width(),m.height()],U&&(t(b),k?k.refit().show():k=new L,q.useClickZoom||(e=e||new ha),z=k.getWindowSize(),f()),J=!0,T?(m.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",x).bind("touchend.magnifier",
A),a(document).trigger("engaged.magnifier")):(G.acEnabled?y.unbind("mousemove.magnifier"):m.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",x)),c)){var d=a("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){A(!0)})}}function N(){q.useHoverZoom&&(T?m.bind("touchstart.magnifier touchmove.magnifier",C):G.acEnabled?p(m)&&y.bind("mousemove.magnifier",C):m.bind("mousemove.magnifier",C))}var w=this,y=m.offsetParent(),D={detailImageUrl:m.attr("data-old-hires"),
location:"over",locationElement:m,prelaod:"ready",zIndex:50,offsetInClickZoom:50};q=a.extend(D,q);q.adjustment=[10,0,-10,0];var k=null,e=null,E=null,F=null,z=null,v={"null":1,"":1,undefined:1},J=!1,X=!1,U=q.detailImageUrl,T=q.useHoverZoomIpad||0,aa=0,ma={},ha=function(){function b(a){var e=Math.round(Math.min(m.width(),k.rect.width/a));a=Math.round(Math.min(m.height(),k.rect.height/a));g.css({width:e,height:a});f=[e,a]}var e=this,f=[0,0],c=(k.detailSize&&k.detailSize[0]||5E8)/F[2],d=(k.detailSize&&
k.detailSize[1]||5E8)/F[3],c=d>c?d:c;a("#magnifierLens").remove();var g=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});q.generalImageUrls.zoomLensBackground&&g.css({backgroundImage:"url("+q.generalImageUrls.zoomLensBackground+")"});G.showMagnifierOnHover?n(g):g.css("cursor","pointer");e.updatePosition=function(){var a=[F[2]-f[0],F[3]-f[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(E[0]-f[0]/2-F[0]-e.offset.left)/a[0])),k=0>=a[1]?.5:Math.max(0,Math.min(1,(E[1]-f[1]/2-F[1]-e.offset.top)/
a[1])),c=F[0]+Math.round(b*a[0]),a=F[1]+Math.round(k*a[1]);g.get(0).style.left=c+"px";g.get(0).style.top=a+"px";return[b,k]};e.destroy=function(){g.remove()};e.offset=m.offsetParent().offset();b(c);e.updatePosition();g.appendTo(m.parent());k.detailImage[0].complete||k.detailImage.load(function(){var a=k.detailImage.width()/F[2];b(a);e.updatePosition()})};ha.preload=function(){w.preload(q.generalImageUrls.lensBackgroundUrl)};var L=function(){function e(){var k={};if("over"===q.location){var k=q.useClickZoom,
f={},d=a("#leftCol"),h=a("#centerCol"),n=a("#rightCol"),l=a("#hover-zoom-end"),t=a("#actionPanelContainer"),E=b.isjQueryObjDefined(d)?d.outerHeight():h.outerHeight();f.top=b.isjQueryObjDefined(d)?d.offset().top:h.offset().top;f.bottom=E+f.top;f.right=b.isjQueryObjDefined(n)?n.offset().left:t.offset().left;f.left=k?0:d.offset().left+d.outerWidth();b.isjQueryObjDefined(l)&&l.offset().top>f.bottom&&(f.bottom=l.offset().top);k=f}else"right"===q.location&&(k=m.offset(),k={left:k.left+m.outerWidth(),top:k.top,
right:k.left+m.outerWidth()+400,bottom:k.top+400});q.minHeightElement&&(k.bottom=Math.max(k.bottom,k.top+a(q.minHeightElement).outerHeight()));k.bottom=Math.min(k.bottom,a(r).scrollTop()+a(r).height());k.left+=g[0];k.top+=g[1];k.right+=g[2];k.bottom+=g[3];k.width=k.right-k.left;k.height=k.bottom-k.top;q.enhancedHoverOverlay&&b.isDefined(r.pageXOffset)&&(f=a(r).width(),k.width=f-k.left+r.pageXOffset-18,k.height-=14);p.css({left:k.left,top:k.top,width:k.width,height:k.height});c.rect=k;return c}function k(a){var b=
new Image;c.detailSize=[0,0];b.onload=function(){c.detailSize=[b.width,b.height];f()};b.src=a.attr("src");if(0<b.width&&0<b.height)c.detailSize=[b.width,b.height];else if(q.detailImageSize)c.detailSize=q.detailImageSize;else{a=d(b.src);var e=F[2]/F[3];a.SS||a.AA?(a=a.SS||a.AA,c.detailSize=[a,a]):a.SX?c.detailSize=[a.SX,Math.round(a.SX/e)]:a.SY?c.detailSize=[Math.round(a.SY*e),a.SY]:a.SL&&(c.detailSize=1<=e?[a.SL,Math.round(a.SL/e)]:[Math.round(a.SL*e),a.SL])}}var c=this,g=q.adjustment;a("#zoomWindow").remove();
var h={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:q.zIndex};q.enhancedHoverOverlay&&(h.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",h.border="1px solid #949494",h.borderColor="rgb(148,148,148)");var p=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(h);q.fadeMagnifier&&p.fadeIn(200);q.useClickZoom&&(K?p.css("cursor",'url("'+q.zoomOutIcon+'"), auto'):(p.css("cursor","-webkit-zoom-out"),p.css("cursor","-moz-zoom-out"),p.css("cursor","zoom-out")));c.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+
b+"'/\x3e").css("position","absolute");c.detailImage&&c.detailImage.remove();p.append(b);a(document).trigger("updated.magnifier");c.detailImage=b;k(c.detailImage)};c.refit=function(){e();k(c.detailImage);return c};q.fadeMagnifier?(c.show=function(){p.fadeIn(200);return c},c.hide=function(){p.fadeOut(200);return c}):(c.show=function(){p.show();return c},c.hide=function(){p.hide();return c});c.destroy=function(){p.remove();return c};c.getWindowSize=function(){return[c.rect.left,c.rect.top,c.rect.width,
c.rect.height]};c.updateImage(U);e();p.appendTo(document.body)},V=!1,fa,B=!1,ba;w.preload=function(b){b=a.makeArray(b);for(var e=b.length,k=0;k<e;k++)b[k]instanceof Array?w.preload(b[k]):"string"===typeof b[k]&&b[k]&&!v[b[k]]&&(v[b[k]]=new Image,v[b[k]].src=b[k])};w.changeImage=function(b,e){J&&A();U=e;m.attr("src",b);w.preload(b);F=[m.position().left,m.position().top,m.width(),m.height()];e&&("immediately"===q.preload?w.preload(e,!0):a(r).ready(function(){w.preload(e)}),k?k.updateImage(e):m.attr("data-old-hires",
e))};w.destroy=function(){G.acEnabled?y.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):m.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");e&&e.destroy();e=null;k&&k.destroy();k=null};w.detailImage=function(){return k.detailImage};w.suppressMagnifier=function(a){X=a};w.isEngaged=function(){return J};w.engageMagnifier=C;w.disengageMagnifier=A;m[0].complete?N():m.one("load",N);w.preload(m.attr("src"));
r.performance&&performance.now&&r.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(q.preload){var ka=q.detailImageUrl,D=function(){w.preload(ka,!0);q.useClickZoom||ha.preload()},Z=q.preload;Z.constructor!==Array&&(Z=[Z]);for(var u=0;u<Z.length;u++)if("immediately"===Z[u])D();else if(a(r)[Z[u]])a(r)[Z[u]](D);else a(r).bind(Z[u],D)}return w}function m(){if(G.useHoverZoom){var d={adjustment:[0,0,1,1],generalImageUrls:G.staticImages,location:"over",minHeightElement:"#imageBlock",
preload:"ready",zIndex:199,useHoverZoomIpad:G.useHoverZoomIpad,useHoverZoom:G.useHoverZoom,useClickZoom:G.useClickZoom,fadeMagnifier:G.fadeMagnifier,zoomOutIcon:G.staticImages.zoomOutCur,enhancedHoverOverlay:G.enhancedHoverOverlay||G.atfEnhancedHoverOverlay};D&&(D.destroy(),D=ea);var g=L.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(g)?G.useClickZoom?(g.one("click.loadmagnifier touchstart.loadmagnifier",function(a){D=
new q(g,d);D.engageMagnifier(a,!0)}),K?g.css("cursor",'url("'+G.staticImages.zoomInCur+'"), auto'):(g.css("cursor","-webkit-zoom-in"),g.css("cursor","-moz-zoom-in"),g.css("cursor","zoom-in"))):D=new q(g,d):l.isEnabled&&c.logHoverZoomApplicability(a,l)}}var N,G,v,y,D,L,K=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){N=this;G=a;v=b;l.refToModel=v;y=d;N.render=function(a,b,c,f,d,g){L=c;D&&(D.destroy(),D=ea)};N.update=function(a){};y.register("loadMagnifier",m);y.register("resize",
m)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(h,a,b,g){function l(a,c,h){a=(a=h?h:b.getColorFromState(c.getState().hovered_variations,d))&&""!==a?a:d.defaultColor;m.dispatch("updateView",{type:"swatchHover",data:{color:a}});g.postCountMetric("swatchHover")}function c(a,c,h,n){a=(a=n?n:b.getColorFromState(c.getState().selected_variations,d))&&""!==a?a:d.defaultColor;a===q.getCurrentItem().color?"function"===typeof h&&h():(m.dispatch("updateSelection",
{type:"swatchClick",data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",a);h()}}),g.postCountMetric("swatchClick"))}var n,d,q,m;return function(a,b,g,r){n=this;d=a;q=b;m=r;h.on("image-block-twister-swatch-hover",l);h.on("image-block-twister-swatch-click",c);n.render=function(a,b,c,d,g){};n.update=function(a){}}});"use strict";v.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader",
"postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(h,a,b,g,l,c,n){function d(b,e,k,c){!f.autoplayVideo||T||f.useChromelessVideoPlayer?!g.isjQueryObjDefined(b.find(".a-button-selected"))&&(k=p.getCurrentItem(),!c||f.prioritizeVideos||"chromeless-video"===k.type&&f.autoplayVideo)&&(c=g.getVideoHash(k.color,0,f),-1!==c&&(e+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:e,variant:c.variant,type:f.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=b.find(".item").get(e),
g.selectGivenThumbnail(a(e),b))):(g.selectGivenThumbnail(b.find("img:last"),b),g.fadeToThumbnail(b.find("img").length-1,H,b))}function q(a){var b=p.getCurrentItem().color;if(f.useChildVideos&&!f.colorToVideo[b]){var e=function(){if(a){f.colorToVideo[b]=a;var e={type:"updatedData",data:p.getCurrentItem()};t.dispatch("updateView",e)}};f.lazyLoadExperienceDisabled?e():v.when(g.rankedImagesReadyEvent(f.colorToAsin[b].asin)).execute(function(){e()})}}function m(a){if(!f.useChildVideos)return g.lazyLoadingRequired(p.getCurrentItem(),
p,f)?void 0:f.videos;if(f.colorToVideo[a])return f.colorToVideo[a];var b=f.colorToAsin[a];if(b&&b.asin){var e={};e.params={asin:b.asin,productGroupID:f.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:f.useChromelessVideoPlayer,isUDP:f.isUDP};f.isDPXFeatureEnabled||(e.success=function(a){q(a)},l.load("/gp/product/features/apparel-main-image/videos.html",e));return f.colorToVideo&&f.colorToVideo[a]}}function N(){M&&(M.hide(),A.parent().css("z-index",-1),C.hide())}function G(){t.dispatch("selectThumbnail",
g.useTabbedImmersiveView(f)?1:0)}function J(e,k,f,d){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:e[0],streamingUrls:k.url,swfUrl:f.swfUrl,foresterMetadataParams:f.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=g.isjQueryObjDefined(e.find("video"))?"HTML5":"FLASH";c.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){e.parent().css("z-index",8)},videounsupported:function(){G();
c.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){G();c.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){M.seek(0)}},cuePoints:[{values:k.durationSeconds-1,type:"position",callback:function(b,k,c){b=c.durationSeconds-c.playheadTimeSeconds;e.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){e.parent().css({"background-color":"transparent","z-index":-1});G();a(this).show().css("opacity",1)})}}]})}function y(b){if("chromeful-video"===
b.type||"chromeless-video"===b.type){var e=g.getVideoHash(b.color,b.index,f);if(-1===e)return-1;if("chromeful-video"===b.type){b=b.thumbnailIndex+1;var c=H.width()/H.height(),d=parseInt(e.videoWidth,10),n=parseInt(e.videoHeight,10);g.updateAspectRatio(c,d,n,A);M?(M.show(),g.loadMediaIntoAiry(M,e,S,f.tabletWeb)):M=f.tabletWeb?E:g.createAiryInstanceForChromefulNotUseTabbedImmersiveView(A,e,S,null,f.autoplayVideo,H,C,x,b,f.useTabbedImmersiveView,z,F,I);b:if(g.useTabbedImmersiveView(f)){if(1<g.getVideosCount(p.getCurrentItem().color,
f)){if(g.isDefined(w)){C.show();break b}w=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(f.staticStrings.watchMoreVideos);C.find("#videoCaption").append(w);h.declarative.create(w,"videoIngressClick",k)}g.playVideoInImmersiveView(f,p.getCurrentItem().color)&&(h.declarative.create(A,"videoIngressClick",k),A.attr&&A.attr("data-ux-click",""),A.children().css("z-index","-1"),A.css("display","inline-block"))}else C.find("#videoCaption").text(f.staticStrings.playVideo),C.show();e=
M;f.autoplayVideo&&e&&!T&&(g.toggleVideoCaption(C),e.setVolume(0),e.show(),e.play(),T=!0)}else M?(M.show(),g.loadMediaIntoAiry(M,e,S,f.tabletWeb),M.play(),C.show()):(M=J(A,e,S))&&M.play()}}function D(b,e,p){var n=m(e);e=b;var l=g.isDefined(n)&&0<n.length&&f.alwaysIncludeVideo?1:0;g.isDefined(n)&&0<n.length&&!f.alwaysIncludeVideo&&b===f.maxAlts&&c.postCountMetric("IBVideoDrop");l&&b===f.maxAlts&&(x.find(".item:last").remove(),b--);g.isDefined(n)&&(a.each(n,function(e,d){if(b<f.maxAlts){var h=f.useChromelessVideoPlayer?
"chromeless-video":"chromeful-video",p={type:h,index:e,thumbnailIndex:b,variant:d.variant};k={type:"video-ingress",index:e,thumbnailIndex:b,variant:d.variant};g.useTabbedImmersiveView(f)&&("chromeful-video"===h&&(aa+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),f.altsOnLeft||(aa+=" a-align-top"));g.createThumbnail(p,d.thumb,x,aa);if(2===f.dp60VideoPosition){var l=x,p=f.dp60VideoPosition;if(0!==p){var m=l.children(".imageThumbnail"),l=l.children(".videoBlockIngress");
m&&l&&m[p-1]&&a(m[p-1]).before(l[0])}}g.useTabbedImmersiveView(f)&&(L(x.find(".videoBlockIngress img"),f.videoIngressATFSlateThumbURL),p=1<n.length?"multiple-videos":"one-video",(m=1<n.length?n.length+" "+f.staticStrings.multipleVideos:f.staticStrings.singleVideo)&&x.find(".videoBlockIngress").append(x.find("#videoCount_template").clone().text(m).attr("id","videoCount")).addClass(p));p=c.buildNexusMetric("ib.thumbnailImpression",b+1,d.mediaObjectId,d.groupType,z,F,I,R);c.emitNexusMetric(p);p=c.buildNexusMetric("ib.thumbnailRender",
b+1,d.mediaObjectId,d.groupType,z,F,I,R);c.emitNexusMetric(p);U||(U=!0,c.postCountMetric("chromeless-video"===h?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(g.useTabbedImmersiveView(f))return!1}),d(x,e,b,p),f.imageBlockRenderingStartTime&&c.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",h.now()-f.imageBlockRenderingStartTime));return b}function L(a,b){var e=a.attr("src");if(e&&b){a.attr("src",b);var k=new Image;k.onload=function(b){a.attr("src",e)};k.src=
e}}function K(a){M&&M.pause();a.data=k;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",a);c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=c.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,f.videos[0].mediaObjectId,f.videos[0].groupType,z,F,I,R);c.emitNexusMetric(a);c.postCountMetric(b)}function O(a){E=a.player;E.hide=function(){E.pause();h.$("#main-video-container").find(".vse-player-container").hide()};
E.show=function(){h.$("#main-video-container").find(".vse-player-container").show();E.play()};E.getMediaSourceInfo=function(){return g.getMediaSourceInfo()}}var Q,f,p,t,x,A,C,H,w,M,S,k,e,E,F,z,I,R,X,U=!1,T=!1,aa="videoThumbnail";return function(b,d,l,m){Q=this;f=b;p=d;t=m;S=f.airyConfig;I=f.contentWeblab&&f.contentWeblab+":"+f.contentWeblabTreatment;f.colorToVideo={};f.colorToVideo[f.landingAsinColor]=f.colorToVideo[f.defaultColor]=f.videos;f.tabletWeb?(X="tablet",R="applicationType.ImageBlock.vse_ib_tablet_web"):
h.capabilities.tablet?(X="tablet",h.capabilities.isAmazonApp&&(R="applicationType.ImageBlock.vse_ib_tablet_app")):(X="desktop",R="desktop_web.ImageBlock.vse_ib_iv");Q.render=function(b,k,c,d,l,m){N();x=d;A=l.find("#main-video-container");C=A.parent().find("#video-canvas-caption");H=a("#main-image-container");z=r.location.href;c=p.getCurrentItem().color;!0===m?F=f.mediaAsin:(F=f.colorToAsin[c]&&f.colorToAsin[c].asin,F=g.isDefined(F)?F:f.mediaAsin);f.useChromelessVideoPlayer||A.addClass("chromeful-container");
e=D(k,b,m);y(p.getCurrentItem());g.useTabbedImmersiveView(f)&&h.declarative("videoIngressClick",["click"],K);c=p.getCurrentItem().color;b=g.getVideoHash(c,0,f);-1!==b&&f.tabletWeb&&(b=g.getNilgiriServiceAjaxRequest(f,c,b),n.get(h,"#main-video-container",b,function(){h.$("#main-video-container").find(".vse-player-container").hide()},function(){h.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return e};Q.update=function(a){var b=a.data;"ingress"===b.type||g.lazyLoadingRequired(b,
p,f)||N();if("swatchHover"===a.type)b.color===p.getCurrentItem().color?y(p.getCurrentItem()):a.captured||g.lazyLoadingRequired(b,p,f)&&!g.lazyLoadOnHoverEnabled(f)&&y(p.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var d=g.getVideoHash(b.color,b.index,f);if("mouseenter"===a.type&&(c.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+e),"chromeless-video"===b.type)){var h=c.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,d.mediaObjectId,
d.groupType,z,F,I,R);c.emitNexusMetric(h)}y(b);f.usePeekHover&&"click"!==a.type||(g.selectGivenThumbnail(a.$declarativeParent,x),"click"===a.type&&(d=c.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,d.mediaObjectId,d.groupType,z,F,I,R),(!g.useTabbedImmersiveView(f)&&"chromeless-video"===b.type||"tablet"==X)&&c.emitNexusMetric(d),g.useTabbedImmersiveView(f)&&(c.emitNexusMetric(d),c.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+e),k.action="videoIngressClick",k.clickTimeStamp=
a.$event.timeStamp,k.$event=a.$event,k.$currentTarget=a.$currentTarget,t.dispatch("videoIngressClick",k),c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(f.isDPXFeatureEnabled)h.on("triggerVideoAjax",q);h.on("vsePlayer-imageblock_tablet",O)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(h,a,b,g,l,c,n,d){function q(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function m(){u.find("#ivTitle").click(function(){Z.hide()})}function N(){P=Pa?{type:"360-spin"}:ba.getCurrentItem()}function G(){var a=u.find("#ivStage"),b=Z.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-d.getDimension(e,"padding-top")-d.getDimension(e,"padding-bottom");u.css("height",b);var e=u.find("#ivTitle").outerHeight(!0),k=u.find("#ivVariationSelection").outerHeight(!0),c=u.find("#ivMediaSelection").outerHeight(!0),f=u.find("#ivThumbs"),
g=d.getDimension(f,"margin-top")+d.getDimension(f,"margin-bottom");f.css("height",b-e-k-c-g);u.find("#ivLargeImage").css("height",b);a.css("width",u.width()-d.getDimension(u,"padding-left")-d.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function J(){u.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===
P.type&&u.find("#ivVideo_"+P.index).click()):"images"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===ca&&0===Y?u.find("#iv360").click():0===ca?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===b&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==P.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+P.index).click())})}function y(){var a=u.find("#ivStage").find("#ivLargeImage"),
b=a.width(),e=a.height(),k=a.find(".fullscreen");k.removeAttr("style");var c=k.width(),f=k.height();0<k.length&&(k[0].naturalWidth&&(c=k[0].naturalWidth),k[0].naturalHeight&&(f=k[0].naturalHeight));a.css("cursor","auto");var c=0===c?1:c,f=0===f?1:f,d=Math.min(b/c,e/f),g=f*d,h=c*d;1>d?(Qa?a.css("cursor","url('"+B.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;c=Math.min(h,c);f=Math.min(g-20,f);k.css({"margin-top":(e-
f)/2,"margin-left":(b-c)/2,height:f,width:c});a.css("visibility","visible");Aa=!1}function D(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();d.animateStageIn(b);b.append(a);y()}function L(){da&&da.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display","none");x()}function K(e){L();u.find("#ivLargeImage").css("display","block");var k;"hero-image"===e?b.isDefined(ia)&&(k=q(ia[P.index])):b.isDefined(ja)&&
(k=q(ja[P.index]));if(b.isDefined(k)){u.find(".fullscreen").remove();var c=a("\x3cimg\x3e").attr("src",k).addClass("fullscreen"),f=u.find("#ivLargeImage");d.animateStageOut(f,function(){c.load(function(){D(c)});if(c[0].complete)D(c);else{f.empty();var b=(f.height()-104)/2,e=(f.width()-80)/2;a("\x3cimg\x3e").attr("src",B.staticImages.spinner).css({position:"relative",top:b+"px",left:e+"px"}).appendTo(f)}})}}function O(){var a=parseInt(P.index,10)+1;a>=ga.length||u.find("#ivVideo_"+a).click()}function Q(){var a;
b.isDefined(ga)&&(a=ga[P.index]);if(b.isDefined(a)){L();var e=u.find("#ivLargeVideo").css("display","block");da?(da.isDetached()&&da.attach(e[0]),b.loadMediaIntoAiry(da,a,wa,B.tabletWeb),da.show()):(da=b.createAiryInstanceForChromeful(e,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&da.bind("ended",O));da.play({isAsync:!0})}}function f(){N();var a;a="hero-image"===P.type?u.find("#ivHeroImage_"+P.index):"image"===P.type?u.find("#ivImage_"+P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?
u.find("#ivVideo_"+P.index):"360-spin"===P.type?u.find("#iv360"):b.isDefined(ia)?u.find("#ivHeroImage_"+P.index):u.find("#ivImage_"+P.index);b.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));p(a)}function p(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=a.attr("id").split("_")[1],Q()):a.hasClass("ivHeroImage")?(P.type="hero-image",P.index=a.attr("id").split("_")[1],K(P.type)):a.hasClass("iv360Image")?(P.type="360-spin",
P.index=0,t()):(P.type="image",P.index=a.attr("id").split("_")[1],K(P.type))}function t(){L();u.find("#ivLarge360").css("display","block");M();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);C();l.postCountMetric("dppc_click360");ta=Date.now()}function x(){0<ta&&(A("dppc_duration360",Date.now()-ta),ta=0)}function A(a,b){r.ue&&r.ue.count(a,b)}function C(){if(0<qa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function H(b,e){if(qa<b.length){var k=a("\x3cimg /\x3e").css({display:"block",width:6*oa+"px",height:sa+"px"});k.hide();e.append(k);k.get(0).onload=function(){e.closest(document.documentElement).length&&(qa++,1===qa&&(C(),0<ta&&A("dppc_loadTime360",Date.now()-ta)),0<Ga&&A("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),k.show(),xa=5*W.imageLocations[Math.floor(ya/W.imageLocations[0].length)][ya%W.imageLocations[0].length],H(b,e))};k.attr("src",b[qa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ua+"$2"+va));Ga=Date.now()}}function w(a){if(b.isDefined(W.spriteWidthSizes)&&0<W.spriteWidthSizes.length){var e=W.spriteWidthSizes,k=e.length,c=e[0],f=e[k-1];if(a<=c)return c;if(a>f)return f;for(c=0;c<k;c++)if(a>e[c]&&a<=e[c+1])return e[c+1]}else return a}function M(){var b=u.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",B.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,S())}function S(){if(b.isDefined(W.spriteURLs)&&b.isDefined(u)&&Ha&&!Ia){var c=u.find("#ivLarge360"),f=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});b.isDefined(W.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",W.staticImages.hint360).appendTo(f);a("\x3cdiv\x3e").css({"text-align":"center"}).text(B.staticStrings.dragToSpin).appendTo(f);f.appendTo(c);var f=W.imageWidth,d=W.imageHeight,g=c.parent().width(),h=c.parent().height(),p=0,n=0;f/d>g/h?(ua=w(g),va=Math.round(d/f*ua),oa=Math.ceil(g),sa=Math.ceil(va/ua*g),n=(h-sa)/2):(va=w(h),ua=Math.round(f/d*va),sa=Math.ceil(h),
oa=Math.ceil(ua/va*h),p=(g-oa)/2);c.css({"margin-left":p,"margin-top":n,width:oa+"px",height:sa+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*oa+"px");H(W.spriteURLs,u.find("#image-360-sprites"),0);f=u.find("#ivLarge360");f.bind("mousedown",F);f.bind("touchstart",k);f.bind("touchmove",e);f.bind("touchend",E);a(document).bind("mousemove",z);a(document).bind("mouseup",I);b.isDefined(B.staticImages.grab)&&c.css("cursor","url('"+B.staticImages.grab+"'), auto");
Ia=!0}}function k(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function e(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function E(a){Ba&&(Ba=!1)}function F(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(B.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+B.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+B.staticImages.grabbing+"'), auto"));return!1}function z(a){Ca&&(R(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function I(a){Ca&&(Ca=!1,b.isDefined(B.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+B.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/oa*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var e;a=360;for(var k=0;k<qa;k++)for(var c=0;c<W.imageLocations[k].length;c++){var f=Math.abs(xa-5*W.imageLocations[k][c]);f<a&&(a=f,e=k*W.imageLocations[0].length+c)}e!==ya&&(a=Math.floor(e/W.imageLocations[0].length),
a!==Math.floor(ya/W.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),k=u.find("#image-360-sprites").children(),La.drawImage(k[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=e;a=e%W.imageLocations[0].length*-1*oa;e=-1*Math.floor(e/W.imageLocations[0].length)*sa;k=u.find("#ivLarge360").children("#image-360-sprites");k.css("-webkit-transform","translate3d("+a+"px, "+
e+"px, 0)");k.css("transform","translate3d("+a+"px, "+e+"px, 0)")}function X(){u.delegate(".ivThumb","click",function(){var b=a(this);p(b)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");P.type="chromeful-video";P.index=b.attr("id").split("_")[1];Q()})}function U(){da&&!da.isDetached()&&(wa.volume=da.getVolume(),da.detach(),!document.all||r.atob||document.addEventListener||(da=null));u.find("#ivLargeImage").empty();
x()}function T(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function aa(b){var e=ra.left-(b.pageX-Da[0])*Ea;h.capabilities.rtl&&(e=ra.left-(a(r).width()-b.pageX-Da[0])*Ea);b=ra.top-(b.pageY-Da[1])*Ea;e=T(e,Fa.left);b=T(b,Fa.top);u.find(".fullscreen").css({left:e,top:b})}function ma(){u.delegate("#ivLargeImage","click",function(a){if(Aa)y();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var b=u.find("#ivLargeImage"),e=b.find(".fullscreen");Qa?b.css("cursor","url('"+B.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var k=u.find("#ivLargeImage");Fa.left=k.width()-e.width();Fa.top=k.height()-e.height();var k=b.height()/2,c=b.width()/2;Da=[b.offset().left+c,b.offset().top+k];ra.top=k-e.height()/2;ra.left=c-e.width()/2;e.css({position:"relative",left:ra.left,top:ra.top});Ea=Math.max(e.height()/b.height(),e.width()/b.width())}aa(a)}});u.delegate("#ivLargeImage","mousemove",function(a){Aa&&aa(a)})}function ha(e){if(b.isImmersiveViewEnabled(B,
ba.getCurrentItem().color))if(Ma){var k=e.$event.originalEvent;k.acknowledge&&k.acknowledge(e.$currentTarget[0]);Pa=b.isDefined(e)&&"button-360-click"===e.action;c.isEnabled&&n.logImmersiveViewRequestServed(c);l.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(Z))Z.show();else{e=a("#auiImmersiveViewDiv");var k=a(r).height()-150,f=a(r).width()-75;Z=Ma.create(e,{name:"immersiveView",activate:"onclick",width:f,height:k,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){u=a("#ivMain");
e=ba.getCurrentItem().color;ja=B.colorImages[e];ia=B.heroImage[e];ga=B.useChildVideos?B.colorToVideo[e]:B.videos;Oa=V()&&B.spin360ColorEnabled[e];W=V()?B.spin360ColorData[e]:ea;N();la=Y=pa=ca=0;b.isDefined(ia)&&(Y=ia.length);b.isDefined(ja)&&(ca=ja.length);b.isDefined(ga)&&(pa=ga.length);Oa&&(la=1);d.populateTitle(u.find("#ivTitle"),45,B);d.populateVariationSelection(u.find("#ivVariationSelection"));e=u.find("#ivMediaSelect");0===ca+la||0===pa?(e.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):
(e.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(B.staticStrings.allMedia+" ("+(Y+ca+la+pa)+")").appendTo(e),a("\x3coption/\x3e").attr("value","images").text(B.staticStrings.images+" ("+(Y+ca+la)+")").appendTo(e),a("\x3coption/\x3e").attr("value","videos").text(B.staticStrings.videos+" ("+pa+")").appendTo(e),e.parent().show(),e.val("all"));e=u.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var k=Y+ca+pa+la,g=f=0;f<k;)for(var p=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),
m=0;3>m&&f<k;m++,f++,g++)if(g<Y){var E=ia[f].thumb,t=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+f).appendTo(p);t.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(E)+'") center no-repeat')}else if(g>=Y&&g<ca+Y)E=ja[f-Y].thumb,t=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-Y)).appendTo(p),t.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(E)+
'") center no-repeat');else if(g>=Y+ca&&g<ca+Y+la)t=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(p),t.find(".ivThumbImage").css("background",'url("'+(b.isDefined(B.staticImages.icon360)?d.getResizedThumbnailURL(B.staticImages.icon360,!0):"")+'") center no-repeat');else if(E=ga[f-ca-Y-la],t=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(f-ca-Y-la)).appendTo(p),t.find(".ivThumbImage").css("background",
'url("'+E.thumbUrl+'") center no-repeat'),b.isDefined(E)){var q={position:"triggerTop"},x=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");x.find(".ivVideoPopoverTitle").text(E.title);x.find(".ivVideoPopoverDuration").text(E.durationTimestamp);q.inlineContent=x[0];h.declarative.create(t,"a-tooltip",q)}e=u.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();k=e.find(".placeholder");for(f=0;f<pa;f++)g=ga[f],p=k.clone().removeClass("placeholder").appendTo(e),
p.attr("id","ivVideoList_"+f),p.find(".ivThumbImage").css("background",'url("'+g.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(g.title),p.find(".ivThumbDuration").text(g.durationTimestamp);u.find("#ivLarge360").empty();qa=0;Ia=Ha=!1;wa=B.airyConfig;Na=!1;Ra()}}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else l.postCountMetric("immersiveViewNotExistsClickCount")}function na(a){var e=
B.colorToAsin[a],k={},c=500;if(e&&e.asin){k.params={asin:e.asin};var f="360"+e.asin,d=Date.now();k.success=function(e){A("dppc_asyncRequestTime360",Date.now()-d);e&&b.isDefined(e.spin360.spin360Model)?(b.ajaxState(f,"success"),B.spin360ColorData[a]=e.spin360.spin360Model,a===ba.getCurrentItem().color&&(W=B.spin360ColorData[a],S())):k.error()};k.error=function(){l.postCountMetric("dppc_asyncFailed360");A("dppc_asyncRequestTime360",Date.now()-d);c*=2;16E3>=c?setTimeout(function(){d=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",
k)},c):b.ajaxState(f,"fail")};b.ajaxState(f)&&"fail"!==b.ajaxState(f)||(g.load("/gp/product/features/apparel-main-image/360.html",k),b.ajaxState(f,"sent"))}}function V(){return b.isDefined(B.spin360ConfigEnabled)&&B.spin360ConfigEnabled}var fa,B,ba,ka,Z,u,ia,ja,ga,Y,ca,pa,la,P,da,wa,W,Oa,oa,sa,va,ua,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,qa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},ra={},Ea,Da,Ma;v.when("a-modal").execute(function(a){Ma=a});var Ra=
h.once(function(){J();X();ma();h.on("a:popover:afterUpdatePosition:immersiveView",G);h.on("a:popover:afterShow:immersiveView",f);h.on("a:popover:afterHide:immersiveView",U);m()});return function(e,k,f,g){fa=this;B=e;ba=k;c.refToModel=ba;ka=g;V()&&(B.spin360ColorData[B.landingAsinColor]=B.spin360ColorData[B.defaultColor],B.spin360ColorEnabled[B.landingAsinColor]=B.spin360ColorEnabled[B.defaultColor]);b.isDefined(B.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
d.addStyleCodeToURL(B.staticImages.icon360,"_FMpng_RI_"));fa.render=function(a,e,k,c,f,d){Na=!0;V()&&B.spin360ColorEnabled[a]&&!b.isDefined(B.spin360ColorData[a])&&(B.spin360ColorData[a]={},na(a));b.isImmersiveViewEnabled(B,ba.getCurrentItem().color)&&V()&&B.spin360ColorEnabled[a]&&(e===B.maxAlts&&(a=c.find(".item.imageThumbnail"),k=c.find(".item.videoThumbnail"),b.isDefined(k)&&1<k.length?k.last().remove():a.last().remove(),e--),a=c.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
h.declarative.create(a,"button-360-click"),c.append(a),e++,l.postCountMetric("dppc_display360"));return e};fa.update=function(a){};b.isImmersiveViewEnabled(B,ba.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ka.register("imageClick",ha);ka.register("button360Click",ha)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(h,a,b,g,l,c,n){function d(){var b=
J.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-n.getDimension(c,"padding-top")-n.getDimension(c,"padding-bottom");a("#iv-tab-view-container").css("height",b);L=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<L?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
a("#iv-tab-view-container .iv-tab-content").css("height",b);h.trigger("dp:image-block:immersive-view:resize")}function q(){h.trigger("dp:image-block:immersive-view:reset")}function m(f){if(b.isImmersiveViewEnabled(G,J.getCurrentItem().color))if(O){var d=f.$event.originalEvent;d.acknowledge&&d.acknowledge(f.$currentTarget[0]);l.isEnabled&&c.logImmersiveViewRequestServed(l);g.postCountMetric("dppc_immersiveViewOpened");b.isDefined(f)&&("button-360-click"===f.action?a("#iv360TabHeading").click():"videoIngressClick"===
f.action?(K=f.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===f.action?(K=f.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());d=J.getImmersiveViewModalInstance();if(b.isDefined(d))d.show();else{f=a("#auiImmersiveViewDiv");var d=Math.min(Math.max(a(r).height()-150,540),1080),n=Math.min(Math.max(a(r).width()-75,990),1980),d=O.create(f,{name:"immersiveView",activate:"onclick",width:n,height:d,popoverLabel:"ImmersiveView",hideHeader:!0});J.setImmersiveViewModalInstance(d);
f.click()}D&&(D=!1,Q(),h.trigger("dp:image-block:immersive-view:init"))}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else g.postCountMetric("immersiveViewNotExistsClickCount")}var N,G,J,y,D=!0,L=0,K,O;v.when("a-modal").execute(function(a){O=a});var Q=h.once(function(){h.on("a:popover:afterUpdatePosition:immersiveView",d);h.on("a:popover:afterShow:immersiveView",d);h.on("a:popover:afterHide:immersiveView",
q)}),f=h.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var f=b.filter(".iv-active");f.attr("id")!==a(this).attr("id")&&h.trigger("dp:ivTabs:"+f.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();f=a(this).find("a").attr("data-iv-tab-view");a("#"+f).show();"ivVideosTab"===f&&(c.clickTimeStamp=K||c.timeStamp);h.trigger("dp:ivTabs:"+f+":select",
c);g.postCountMetric("dppc_"+f);return!1})});return function(a,c,d,h){N=this;G=a;J=c;l.refToModel=J;y=h;N.render=function(a,b,c,f,d,k){g.postCountMetric("dpcc_altThumbs_"+b);D=!0};N.update=function(a){};N.getTitle=function(){};N.getVariationSelectionInfo=function(){};f();b.isImmersiveViewEnabled(G,J.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");y.register("imageClick",m);y.register("button360Click",m);b.useTabbedImmersiveView(G)&&(y.register("videoIngressClick",m),y.register("showroomIngressClick",
m))}});"use strict";v.when("A").register("ImageBlockLoader",function(h){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;h.ajax(a,b)}}});"use strict";v.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(h,a,b,g,l,c,n,d,q){function m(a){return null!==a&&"undefined"!==typeof a}function N(b){var e=0;a.each(b,function(a,b){var k=parseInt(b[1],10);k>e&&(e=k)});
return e}function G(b){var e=0;a.each(b,function(a,b){var k=parseInt(b[0],10);k>e&&(e=k)});return e}function v(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=N(a);0<a&&(b=Math.min(b,a));return b}function y(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=G(a);0<a&&(b=Math.min(b,a));return b}function D(b){var e;a.each(b,function(a,b){m(e)||(e=b[1]/b[0])});return e||1}function L(k,e,c,f,d,h,n,p,l,m,q,t,A){var x=a.extend({},c.foresterMetadataParams);null!==f&&(x.method+="."+f);var G=
[];e.disabledViewIds&&(G=e.disabledViewIds);return b.embed({parentElement:k[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:c.swfUrl,foresterMetadataParams:x,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:c.videoAds,bindings:{play:function(){if("ImmersiveView"===f)C||(C=!0,g.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(H||(H=!0,g.postCountMetric("dppc_chromefulVideoPlayedPV")),
!m){var a=g.buildNexusMetric("ib.thumbnailClick",l,e.mediaObjectId,e.groupType,q,t,A);g.emitNexusMetric(a)}}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,e){d&&(K(0,h,p),O(n))}}],disabledViewIds:G})}function K(a,b,c){b.fadeTo(500,0,function(){Q(a,c);b.fadeTo(500,1)})}function O(a){a&&a.toggle()}function Q(b,e){var c=e.find("img");m(c[b])&&a(c[b]).click()}function f(a,b){S[a]=b?b:S[a];return S[a]}function p(b,e,c){c=c||M;c=c.colorImages;if(1>c.length||!m(c[b])||!m(e))return-1;
var f=-1;a.each(c[b],function(a,b){b.variant===e&&(f=a)});return f}function t(b,e,c){c=c||M;c=c.colorImages;return!(m(c)&&m(c[b])&&m(c[b][e])&&m(c[b][e].main))||1>a.map(c[b][e].main,function(a,b){return b}).length?-1:c[b][e]}function x(a,b,c,f){f.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?f.css("width",b/a*100+"%"):f.css("height",a/b*100+"%"))}function A(b,e){var c;if(c=b.useIV)c=b.colorImages&&b.colorImages[e]&&0<b.colorImages[e].length?!0:!1;n.isEnabled&&(n.IVApplicaple=c,d.logImmersiveViewApplicability(a,
n));return c}var C,H,w,M=a.extend(!0,{},l,c),S={};return{isDefined:m,isDefinedAndEmpty:function(a){return m(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return m(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return m(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:D,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:v,getMaxDimensionsOfMainImage:function(a,
b,c){if(c.acEnabled)return[b.height(),b.width()];var f=y(a,b,c);b=v(a,b,c);a=D(a);c=b/a;b=Math.min(b,f*a);f=Math.min(f,c);return[f,b]},getContainerHeight:function(a,b,c){var f=a.get(0);a=0;if(m(f)){a=f.offsetWidth/b;a=Math.min(a,c);var d;b=M.mainImageHeightPartitions;c=M.mainImageMaxSizes;if(m(c)&&m(b)){for(var g=0,h=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=0;f<b.length;f++)h>b[f]&&(g=f+1);c.length>=g&&(d=c[g])}m(d)&&(a=Math.min(d[1],a))}return a},getColorFromState:function(b,
e){if(b){e=e||M;var c="";a.each(e.visualDimensions,function(a,e){b[e]&&(c+=" "+b[e])});return c&&c.substring(1)}},createThumbnail:function(a,b,c,f){var d=c.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");g.src=b;d.find(".placeHolder").replaceWith(g);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&d.addClass("heroImageThumbnail");m(f)&&d.addClass(f);h.declarative.create(d,"thumb-action",a);d.attr&&d.attr("data-ux-click","");c.append(d)},
selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,f,d,g,h,n){L(a,b,c,f,d,g,h,n,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:L,loadMediaIntoAiry:function(a,b,c,f){a&&a.getMediaSourceInfo()!==b.url&&(f?a.loadMedia?(w={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},
a.loadMedia(w)):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId}))},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},
hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:K,toggleVideoCaption:O,selectThumbnail:Q,spinner:function(b,c){var f=a("#imageBlock .a-spinner").parent();0===f.length&&(f=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(f),f.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",
height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?f.show():f.hide();return f},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:f,getIndexForVariant:p,getImageHash:t,lazyLoadingRequired:function(a,b,c){b=Math.max(p(a.color,b.getCurrentItem().variant,c),0);b=-1!==t(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==f(a);return!c.lazyLoadExperienceDisabled&&
!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:x,repositionVideoBanner:function(a,b,c,f){setTimeout(function(){var c=a.width()/a.height();x(c,16,9,b)},f||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!m(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return m(a)&&m(a[b])&&m(a[b].url)?a[b]:-1},isImmersiveViewEnabled:A,
playVideoInImmersiveView:function(a,b){return A(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return m(w)?w.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){r.ue&&r.ue.tag&&
r.ue.tag(a)},isShoppableScenesEnabled:function(){return q.isEnabled&&0<a(".mirai-scene-image-block-template").length}}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(h,a,b,g){function l(c,d,h,l){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var m=D.getCurrentItem();if(!l||"chromeless-video"!==m.type||!y.autoplayVideo){l=0;if("hero-image"===m.type){l=n(m.color,m.variant);if(-1===l)return;l=-1!==l?l:0}var q=d+l;q>=h&&
(l=0,q=d);d=g.getHeroImageHash(y,m.color,l);-1!==d&&(L.dispatch("updateModel",{data:{index:l,thumbnailIndex:q,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(q),b.selectGivenThumbnail(a(d),c))}}}function c(c,d,g){if("hero-video"===D.getCurrentItem().type)return c;d=y.heroImage&&y.heroImage[d];var h=c;b.isDefined(d)&&(a.each(d,function(a,d){c<y.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:d.variant},d.thumb,K,"imageThumbnail"),c++)}),l(K,h,c,g));return c}
function n(c,d){var g=y.heroImage;if(1>g.length||!b.isDefined(g[c])||!b.isDefined(d))return-1;var h=-1;a.each(g[c],function(a,b){b.variant===d&&(h=a)});return h}function d(){if(O.length&&y.repositionHeroImage){var a=g.getHeroDimParams(y,D.getCurrentItem()),c;b.isDefined(a)&&(c=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",O.css({"background-position":c,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}
function q(a,c,d,h){if(O.length&&a&&c){if("function"===typeof d||h){var n=new Image;n.onload=h?function(){O.css("background-image",'url("'+a+'")')}:d;n.src=a}d=c[1];var n=c[0],l;h||O.css({"background-image":'url("'+a+'")'});y.repositionHeroImage&&(c=g.getHeroDimParams(y,D.getCurrentItem(),c),b.isDefined(c)&&(d=c.width,n=c.height,l=b.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));O.css({"background-position":l,"background-size":d+"px "+n+"px ","max-width":d+"px ","min-height":n+
"px ",filter:"","-ms-filter":""})}}function m(b,c,d,h){b=g.getHeroImageHash(y,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];q(c,b.main[c],d,h)}function r(a,b,c){if("hero-image"!==a.type)return-1;var d=n(a.color,D.getCurrentItem().variant),d=-1!==d?d:0;if(-1===g.getHeroImageHash(y,a.color,d))return-1;var h=D.getCurrentItem();a.thumbnailIndex=h.thumbnailIndex;a.type=h.type;a.variant=h.variant;a.index=d;G(a,b,c)}function G(a,b,c){var d=g.getHeroImageHash(y,a.color,a.index),n;n=a&&
Q&&h.equals(a,Q)?!0:!1;Q||(Q=a);if(!n&&a||b)m(a.color,a.index,b,c),Q=a;O.removeClass("hide-background");h.trigger("dp:image-block:update",d)}var v,y,D,L,K,O,Q={};return function(f,g,h,n){v=this;y=f;D=g;L=n;y.heroImage[y.landingAsinColor]=y.heroImage[y.defaultColor];v.render=function(b,d,f,g,h,n,k){K=g;O=a("#heroImage");b=c(d,b,n);r(D.getCurrentItem(),k,n);return b};v.update=function(a){var c=a.data;"ingress"!==c.type&&O.addClass("hide-background");"swatchHover"===a.type?a.captured||(c.type=D.getCurrentItem().type,
-1!==r(c)&&(a.captured=!0)):"hero-image"===c.type&&(G(c),"click"!==a.type&&y.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,K))};L.register("resize",d)}});"use strict";v.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(h,a,b){var g,l,c,n;return function(a,q,m,r){g=this;l=a;c=r;g.render=function(a,c,d,m,q,r,v){n=m;g=this;d=l.maxAlts;m=c;q=l.colorImages[a]?l.colorImages[a].length:0;q+=b.getVideosCount(a,l);a=l.heroImage[a];r=0;a&&(r=a.length);a=q+r;a>
d&&(d=a-d,a=n.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",m={type:"ingress",index:0,thumbnailIndex:c,variant:""},a.find("#altIngressText").append(d),h.declarative.create(a,"thumb-action",m),n.append(a),m=c++);return m};g.update=function(a){"ingress"===a.data.type&&"click"===a.type&&c.dispatch("imageClick",a)}}});"use strict";v.when("imageBlockUtils").register("ImageBlockState",function(h){return function(a,b,g){this.getImageHash=
function(b){var c=g.getCurrentItem();b=h.getIndexForVariant(c.color,b||"MAIN",a);return h.getImageHash(c.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});"use strict";v.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(h,a){function b(a,b){var d;if(b.repositionHeroImage){d=a[1];var g=a[0];if(768>=(r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=
.7,g*=.7;else{var h=((r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);d*=.7+.3*h;g*=.7+.3*h}d=[d,g]}return d}function g(b,g,d){var h;if(d.repositionHeroImage){var l=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(a.isDefined(d)){h=Math.max((l-Math.min(1500,b))/2,0);var v=Math.max((l-b)/2,0);h-=v;l=Math.max(Math.min(l,1500),1024);h=h+(l-420-23)/2-b/g[1]*d}}return h}function l(b,
g,d){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[g])&&a.isDefined(b[g][d])&&a.isDefined(b[g][d].main))||1>h.map(b[g][d].main,function(a,b){return b}).length?-1:b[g][d]}return{getHeroImageHash:l,getHeroDimParams:function(c,n,d){if(c.repositionHeroImage){if(!a.isDefined(d)){d=l(c,n.color,n.index);if(-1===d)return;n=h.map(d.main,function(a,b){return b})[0];d=d.main[n]}n=b(d,c);c=g(n[0],d,c);return{height:n[1],width:n[0],xPos:c,yPos:75}}}}});"use strict";v.when("postMetric").register("ImageBlockImmersiveViewShowroom",
function(h){function a(){this.render=function(){};this.update=function(){}}return function(b,g,l,c){var n=!1,d=new a;v.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==ea&&(n=!0,d=new a(b,g,l,c))});b&&!0===b.showroomEnabled&&!1===n&&h.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");return d}});"use strict";v.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(h,a,b){function g(a,g){var d=h.copy(a);
if(b.isDefined(a)&&a.length>g){try{for(var l=-1,m=0;m<a.length;m++){var r=a.charAt(m);if(" "===r||"."===r||"?"===r||";"===r||","===r||":"===r)l=m;if(m===g-4){d=a.substring(0,-1===l?m:l);break}}}catch(v){d=a.substring(0,g-3)}d+="..."}return d}function l(a,b){var d=a.lastIndexOf(".");return a="_"===a.charAt(d-1)?a.substring(0,d-1)+b+a.substring(d):a.substring(0,d)+"."+b+a.substring(d)}return{getDimension:function(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d},attachTabSelectHandler:function(a,
b){h.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){h.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){h.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){h.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){h.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:l,getResizedThumbnailURL:function(a,
b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var d="_AA50_";b&&(d+="FMpng_RI_");return l(a,d)},populateVariationSelection:function(c){if(b.isDefined(r.DetailPage)&&b.isDefined(r.DetailPage.StateController)){c.empty();var g=r.DetailPage.StateController.getState(),d=g.variation_label_order,h;for(h in d)if(d.hasOwnProperty(h)){var l=d[h],v=g.selected_variations[l],
l=g.variation_display_labels[l];v&&a("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+v).appendTo(c)}}},populateTitle:function(a,b,d){a.html(d.title);a.attr("title",a.text());a.html(g(d.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,d,g){r.ueLogError&&r.ueLogError(g,{logLevel:a,attribution:b,message:d})}}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",
function(h,a,b,g,l){function c(){l.populateTitle(t.find("#ivTitle"),160,f)}function n(){var a=p.getCurrentItem().color;A=f.colorImages[a];x=f.heroImage[a];C=H=0;b.isDefined(x)&&(C=x.length);b.isDefined(A)&&(H=A.length)}function d(a){return a.hiRes||a.large||a.main[a.main.length-1]}function q(){var a=t.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var g=d.width(),h=d.height();0<d.length&&(d[0].naturalWidth&&(g=d[0].naturalWidth),d[0].naturalHeight&&
(h=d[0].naturalHeight));a.css("cursor","auto");var g=0===g?1:g,h=0===h?1:h,l=Math.min(b/g,c/h),n=h*l,m=g*l;1>l?(M?a.css("cursor","url('"+f.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),e=!0):e=!1;g=Math.min(m,g);h=Math.min(n-20,h);d.css({"margin-top":(c-h)/2,"margin-left":(b-g)/2,height:h,width:g});a.css("visibility","visible");k=!1}function m(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();l.animateStageIn(b);
b.append(a);q()}function r(c){t.find("#ivLargeImage").css("display","none");t.find("#ivLargeImage").css("display","block");var e;"hero-image"===c?b.isDefined(x)&&(e=d(x[w.index])):b.isDefined(A)&&(e=d(A[w.index]));if(b.isDefined(e)){t.find(".fullscreen").remove();var g=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),h=t.find("#ivLargeImage");l.animateStageOut(h,function(){g.load(function(){m(g)});if(g[0].complete)m(g);else{h.empty();var b=(h.height()-104)/2,c=(h.width()-80)/2;a("\x3cimg\x3e").attr("src",
f.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(h)}})}}function v(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?w.type="hero-image":w.type="image";w.index=a.attr("id").split("_")[1];r(w.type);g.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(w.index,10)+1)+"_"+(C+H))}function J(){t.delegate(".ivThumb","click",function(){var b=a(this);v(b)})}function y(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function D(a){var b=
F.top-(a.pageY-I[1])*z;a=y(F.left-(a.pageX-I[0])*z,E.left);b=y(b,E.top);t.find(".fullscreen").css({left:a,top:b})}function L(){t.delegate("#ivLargeImage","click",function(a){if(k)q();else if(e){t.find(".fullscreen").removeAttr("style");if(e){var b=t.find("#ivLargeImage"),c=b.find(".fullscreen");M?b.css("cursor","url('"+f.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));k=!0;var d=t.find("#ivLargeImage");E.left=d.width()-
c.width();E.top=d.height()-c.height();var d=b.height()/2,h=b.width()/2;I=[b.offset().left+h,b.offset().top+d];F.top=d-c.height()/2;F.left=h-c.width()/2;c.css({position:"relative",left:F.left,top:F.top});z=Math.max(c.height()/b.height(),c.width()/b.width())}D(a);g.postCountMetric("dpcc_iv_largeImageCLick")}});t.delegate("#ivLargeImage","mousemove",function(a){k&&D(a)})}function K(){t.find("#ivLargeImage").empty()}function O(e){if(S){t=a("#ivMain");n();w=p.getCurrentItem();c();l.populateVariationSelection(t.find("#ivVariationSelection"));
e=t.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var d=C+H,f=0,g=0;f<d;)for(var h=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),k=0;4>k&&f<d;k++,f++,g++)if(g<C){var m=x[f].thumb,q=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+f).appendTo(h);q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(m)+'") center no-repeat')}else g>=C&&g<H+C&&(m=A[f-C].thumb,q=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(f-C)).appendTo(h),q.find(".ivThumbImage").css("background",'url("'+l.getResizedThumbnailURL(m)+'") center no-repeat'));R();S=!1}else c();e=a("#ivImagesTab").height();t.css("height",e);d=t.find("#ivTitle").outerHeight(!0);f=t.find("#ivVariationSelection").outerHeight(!0);g=t.find("#ivThumbs");h=l.getDimension(g,"margin-top")+l.getDimension(g,"margin-bottom");g.css("height",e-d-f-h);t.find("#ivLargeImage").css("height",e);e=t.find("#ivStage");d=t[0]&&t[0].getBoundingClientRect&&Math.floor(t[0].getBoundingClientRect().width)||
t.width();e.css("width",d-l.getDimension(t,"padding-left")-l.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-l.getDimension(e,"margin-left")-l.getDimension(e,"margin-right"));w=p.getCurrentItem();e="hero-image"===w.type?t.find("#ivHeroImage_"+w.index):"image"===w.type?t.find("#ivImage_"+w.index):b.isDefined(x)?t.find("#ivHeroImage_"+w.index):t.find("#ivImage_"+w.index);b.isjQueryObjDefined(e)||(e=t.find("#ivImage_0"));v(e)}var Q,f,p,t,x,A,C,H,w,M=navigator.userAgent.match(/msie|trident/i),
S=!0,k=!1,e=!1,E={},F={},z,I,S=!0,R=h.once(function(){J();L();l.attachImmersiveViewResizeHandler(O);l.attachTabDeselectHandler("ivImagesTab",K)});return function(b,c,e,d){Q=this;f=b;p=c;Q.render=function(b,c,e,d,f,g){S=!0;n();0===C+H?l.hideTabHeading("ivImagesTabHeading"):l.unhideTabHeading("ivImagesTabHeading");1===C+H?a("#ivThumbs").hide():a("#ivThumbs").show()};Q.update=function(a){};l.attachTabSelectHandler("ivImagesTab",O)}});"use strict";v.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils",
"vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(h,a,b,g,l,c,n){function d(){A.delegate(".ivThumb","click",function(){var b=a(this);A.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")&&(C.type="chromeful-video",C.index=b.attr("id").split("_")[1])})}function q(){if(U){var b=a("#ivVideosTab").height();A.css("height",b);var c=A.find(".vse-lb-container");H=b-l.getDimension(c,"padding-top")-l.getDimension(c,"padding-bottom");
c.css({"max-height":b,overflow:"hidden"});if(z){A.css({"max-width":Math.floor(1.77*H)});return}var b=A.find(".vse-player-container"),c=A.find(".vse-video-action-strip"),e=A.find(".vse-lb-video-metadata"),d=Math.floor(H-l.getDimension(e,"height")-l.getDimension(c,"height")),f=Math.floor(1.77*d);b.css({"max-height":d,"max-width":f,marginLeft:"auto",marginRight:"auto"});e.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}I&&(b=A.find(".vse-vertical-scroll"),
c=l.getDimension(b,"margin-top")+l.getDimension(b,"margin-bottom"),b.css("max-height",H-c))}function m(){v();w&&w.pause();R=!1;E=!0;e=null;X=!0;U=!1}function v(){R=!1;w&&w.pause()}function G(c){e=c.clickTimeStamp?c.clickTimeStamp:h.now();b.isDefined(x)&&(x.eventTimestamp=e);F&&(n.get(h,"#ivVideoBlock",t,na,V),A=a("#ivVideoBlock"),p.getCurrentItem(),C=p.getCurrentItem(),aa());q();R=!0;F=!1;D()}function J(b){F&&(A=a("#ivVideoBlock"),p.getCurrentItem(),C=p.getCurrentItem(),aa());R&&D();q()}function y(a){w=
a.player;g.postTimeMetric("vse_ib_desktop_player_initialisation_duration",h.now()-T);f.imageBlockRenderingStartTime&&g.postTimeMetric("vse_ib_desktop_time_to_player_interactive",h.now()-f.imageBlockRenderingStartTime);U&&(O(),D())}function D(){if(w&&R&&(A.find(".vse-lb-container").animate({opacity:1},200),w.play(x),g.postCountMetric("dpcc_vse_videoBlock_video_played"),E)){var a=r.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,g.postTimeMetric("dpcc_vse_vitff",a),E=!1)}}function L(){h.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}
function K(a){M=a.popover.$popover;U=!0;O()}function O(){U&&X&&R&&w&&(M.addClass(h.$(M).find(".vse-lb-container").data("cssClass")),h.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:x}),q(),X=!1)}var Q,f,p,t,x,A,C,H,w,M,S,k,e,E=!0,F=!0,z=!1,I=!1,R=!1,X=!0,U=!1,T=0,aa=h.once(function(){d();l.attachImmersiveViewResizeHandler(J);l.attachTabDeselectHandler("ivVideosTab",v);l.attachImmersiveViewResetHandler(m)}),ea=function(c,e,d){a("#ivVideoBlockSpinner").addClass("aok-hidden");
g.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+e.placement);c=p.getCurrentItem().color;c=b.getVideoHash(c,0,f);w||(w=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,f.airyConfig,"ImmersiveView"));z=!0;a("#ivVideoBlock").css({"max-width":1.77*H,margin:"0 auto"});R&&z&&w.play({isAsync:!0})},ha=function(b,c,e){F||n.get(b,"#ivVideoBlock",t,na,V);a("#ivVideoBlockSpinner").addClass("aok-hidden")},na=function(a,b,c){I=!0;q()},V=function(a,b,c){g.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+
b.pageContext.placement+"_"+b.configuration.type)};return function(a,d,g,n){Q=this;f=a;p=d;Q.render=function(a,d,g,n,m,q){a=p.getCurrentItem().color;d=b.getVideoHash(a,0,f);!0===q?S=f.mediaAsin:(S=f.colorToAsin[a]&&f.colorToAsin[a].asin,S=b.isDefined(S)?S:f.mediaAsin);k=null!==f.vseVideoDataSourceTreatment&&"T1"===f.vseVideoDataSourceTreatment?"ASIN":"physicalID";F=!0;-1===d?l.hideTabHeading("ivVideosTabHeading"):(l.unhideTabHeading("ivVideosTabHeading"),t={page:"DetailPage",placement:"ImageBlock",
device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:S,contentIDType:"ASIN"},video:{contentID:d.mediaObjectId,contentIDType:k,videoURL:d.url,imageURL:d.slateUrl},requestId:f.dpRequestId,metadata:{ProductTitle:f.title}},x={videoUrl:t.video.videoURL,contentId:t.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(e)?e:h.now(),imageUrl:t.video.imageURL,productAsin:t.product.contentID,index:0},b.isDefinedAndNotEmpty(w)&&(w.destroy(),w=null),T=h.now(),
c.get(h,"#ivVideoBlock",t,ha,ea))};Q.update=function(a){};l.attachTabSelectHandler("ivVideosTab",G);h.on("vsePlayer-detailpage-imageblock",y);h.on("a:popover:afterShow:immersiveView",K);h.on("a:popover:beforeHide:immersiveView",L)}});"use strict";v.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(h,a,b,g,l,c,n,d,q){function m(){var b=
a("#iv360Tab").height();z.css("height",b);var c=z.find("#ivTitle360").outerHeight(!0),e=z.find("#ivVariationSelection360").outerHeight(!0),d=z.find("#ivThumbs360"),f=n.getDimension(d,"margin-top")+n.getDimension(d,"margin-bottom");d.css("height",b-c-e-f);b=z.find("#ivStage360");c=z[0]&&z[0].getBoundingClientRect&&Math.floor(z[0].getBoundingClientRect().width)||z.width();b.css("width",c-n.getDimension(z,"padding-left")-n.getDimension(z,"padding-right")-z.find("#ivThumbColumn360").width()-n.getDimension(b,
"margin-left")-n.getDimension(b,"margin-right"))}function r(){D();var a=z.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});n.animateStageIn(a)},200);v()}function v(){if(0<u){var a=z.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(b,d){if(u<b.length){var f=a("\x3cimg /\x3e").css({display:"block",width:6*R+"px",height:X+"px"});f.hide();d.append(f);f.get(0).onload=function(){d.closest(document.documentElement).length&&(u++,1===
u&&(v(),0<B&&(l.time("dppc_loadTime360",Date.now()-B,e.mediaAsin),c.postTimeMetric("dppc_loadTime360",Date.now()-B))),0<ba&&(l.time("dppc_perSpriteloadTime360",Date.now()-ba,e.mediaAsin),c.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ba)),z.find("#iv360Spinner").hide(),f.show(),V=5*I.imageLocations[Math.floor(fa/I.imageLocations[0].length)][fa%I.imageLocations[0].length],J(b,d))};f.attr("src",b[u].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+U));ba=Date.now()}}function y(a){if(b.isDefined(I.spriteWidthSizes)&&
0<I.spriteWidthSizes.length){var c=I.spriteWidthSizes,e=c.length,d=c[0],f=c[e-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<e;d++)if(a>c[d]&&a<=c[d+1])return c[d+1]}else return a}function D(){var b=z.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none",
"-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",e.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),ha=!0,L())}function L(){if(b.isDefined(I.spriteURLs)&&b.isDefined(z)&&ha&&!na){var c=z.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(I.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto",
"margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(e.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=I.imageWidth,g=I.imageHeight,h=c.parent().width(),k=c.parent().height(),l=0,n=0;d/g>h/k?(T=y(h),U=Math.round(g/d*T),R=Math.ceil(h),X=Math.ceil(U/T*h),n=(k-X)/2):(U=y(k),T=Math.round(d/g*U),X=Math.ceil(k),R=Math.ceil(T/U*k),l=(h-R)/2);c.css({"margin-left":l,"margin-top":n,width:R+"px",height:X+"px",overflow:"hidden",
position:"relative"});c.children("#image-360-sprites").css("width",6*R+"px");J(I.spriteURLs,z.find("#image-360-sprites"),0);d=z.find("#ivLarge360");d.bind("mousedown",f);d.bind("touchstart",K);d.bind("touchmove",O);d.bind("touchend",Q);a(document).bind("mousemove",p);a(document).bind("mouseup",t);b.isDefined(e.staticImages.grab)&&c.css("cursor","url('"+e.staticImages.grab+"'), auto");na=!0}}function K(a){Z=!0;ma=a.originalEvent.targetTouches[0].clientX}function O(a){Z&&(x(a.originalEvent.targetTouches[0].clientX-
ma),ma=a.originalEvent.targetTouches[0].clientX)}function Q(a){Z&&(Z=!1)}function f(a){ka=!0;aa=a.originalEvent.clientX;b.isDefined(e.staticImages.grabbing)&&(a=z.find("#ivLarge360"),a.css("cursor","url('"+e.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+e.staticImages.grabbing+"'), auto"));return!1}function p(a){ka&&(x(a.originalEvent.clientX-aa),aa=a.originalEvent.clientX)}function t(a){ka&&(ka=!1,b.isDefined(e.staticImages.grab)&&(a=z.find("#ivLarge360"),
a.css("cursor","url('"+e.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function x(a){V-=a/R*180;ja&&(l.count("dppc_360dragToSpin",e.mediaAsin),c.postCountMetric("dppc_360dragToSpin"));ja=!1;for(a=V;0>a;)a+=360;for(;360<a;)a-=360;V=a;var d;a=360;for(var f=0;f<u;f++)for(var g=0;g<I.imageLocations[f].length;g++){var h=Math.abs(V-5*I.imageLocations[f][g]);h<a&&(a=h,d=f*I.imageLocations[0].length+g)}d!==fa&&(a=Math.floor(d/I.imageLocations[0].length),a!==Math.floor(fa/
I.imageLocations[0].length)&&(b.isDefined(ia)||(ia=document.createElement("canvas").getContext("2d")),f=z.find("#image-360-sprites").children(),ia.drawImage(f[a],0,0)),a=z.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));fa=d;a=d%I.imageLocations[0].length*-1*R;d=-1*Math.floor(d/I.imageLocations[0].length)*X;f=z.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");f.css("transform",
"translate3d("+a+"px, "+d+"px, 0)")}function A(){if(Y){z=a("#ivMain360");var b=E.getCurrentItem().color;H()&&w(b);I=H()?e.spin360ColorData[b]:ea;n.populateTitle(z.find("#ivTitle360"),160,e);n.populateVariationSelection(z.find("#ivVariationSelection360"));z.find("#ivLarge360").empty();u=0;na=ha=!1;fa=V=0;ca();Y=!1}0!==a("#iv360Tab").height()&&(n.detachImmersiveViewResizeHandler(A),m(),r(),B=Date.now(),ga=ja=!0,l.count("dppc_click360",e.mediaAsin),c.postCountMetric("dppc_click360"))}function C(a,f,
h){a=e.colorToAsin[h];var k={},n=500;if(!a||!a.asin)if(h===e.defaultColor)a={asin:e.winningAsin};else return;k.params={asin:a.asin};var m="360"+a.asin,p=Date.now();k.success=function(a){l.time("dppc_asyncRequestTime360",Date.now()-p,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&d.setData(a),b.ajaxState(m,"success")):k.error()};k.error=function(){l.count("dppc_asyncFailedTransient360",e.mediaAsin);c.postCountMetric("dppc_asyncFailedTransient360");
l.time("dppc_asyncRequestTime360",Date.now()-p,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);n*=2;16E3>=n?setTimeout(function(){p=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",k)},n):(l.count("dppc_asyncFailed360",e.mediaAsin),c.postCountMetric("dppc_asyncFailed360"),b.ajaxState(m,"fail"))};b.ajaxState(m)&&"fail"!==b.ajaxState(m)||(g.load("/gp/product/features/apparel-main-image/360.html",k),b.ajaxState(m,"sent"))}function H(){return e&&b.isDefined(e.spin360ConfigEnabled)&&
e.spin360ConfigEnabled}function w(a){return b.isDefinedAndNotEmpty(e.spin360ColorData[a])?!0:b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled}function M(){ga&&(l.time("dppc_duration360",Date.now()-B,e.mediaAsin),c.postTimeMetric("dppc_duration360",Date.now()-B),ga=!1)}function S(a){a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;a||(a=e.mediaAsin);return a}var k,e,E,F,z,I,R,X,U,T,aa,ma,ha=!1,na=!1,V=0,fa=0,B=0,ba=0,ka=!1,Z=!1,u=0,ia,ja=!0,ga=!1,Y=!0,ca=h.once(function(){n.attachImmersiveViewResizeHandler(A);
n.attachImmersiveViewResizeHandler(m);n.attachImmersiveViewResetHandler(M);n.attachTabDeselectHandler("iv360Tab",M)});return function(f,g,m,p){k=this;e=f;E=g;F=p;f=e.landingAsinColor;g=e.defaultColor;b.isDefined(e.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",n.addStyleCodeToURL(e.staticImages.icon360,"_FMpng_RI_"));H()&&(e.spin360ColorData||(e.spin360ColorData={}),f===g&&b.isDefinedAndEmpty(e.spin360ColorData[g])&&delete e.spin360ColorData[g]);
h.on(q.TWISTER_DATA_EVENT,function(a){S(E.getCurrentItem())===a&&(I=d.getData(a),L(),a={type:"updatedData",data:E.getCurrentItem()},F.dispatch("updateView",a))});k.render=function(f,g,k,m,p,q){Y=!0;!H()||b.isDefinedAndEmpty(e.spin360ColorData[f])&&!d.getData(S(E.getCurrentItem()))?n.hideTabHeading("iv360TabHeading"):(e.spin360ColorData[f]=d.getData(S(E.getCurrentItem())),b.isDefinedAndNotEmpty(e.spin360ColorData[f])?(a("#ivThumbs360").hide(),n.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(e,
E.getCurrentItem().color)&&H()&&w(f)&&(g===e.maxAlts&&(f=m.find(".item.imageThumbnail"),g=m.find(".item.videoThumbnail"),b.isDefined(g)&&1<g.length?g.last().remove():f.last().remove()),f=m.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),h.declarative.create(f,"button-360-click"),m.append(f),l.count("dppc_display360",e.mediaAsin),c.postCountMetric("dppc_display360"))):b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled?(e.spin360ColorData[f]=
{},n.hideTabHeading("iv360TabHeading"),C(m,g,f)):n.hideTabHeading("iv360TabHeading"))};k.update=function(a){};n.attachTabSelectHandler("iv360Tab",A)}});v.register("nexusLogger360",function(){return{count:function(h,a){r.ue&&r.ue.event({asin:a,metricName:h,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(h,a,b){r.ue&&r.ue.event({asin:b,metricName:h,metricValue:a},"hit-360","hit360.clientEvent.3")}}});v.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});
v.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(h,a){var b={};return{setData:function(g){var l=g.asin;b[l]||(b[l]=g,h.trigger(a.TWISTER_DATA_EVENT,l))},getData:function(a){return b[a]}}});"use strict";v.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(h,a){v.register("vse_ns_preLoaderHook",function(){function b(g,l){try{var c=g.A,n=g.block,d=g.request,q=g.handleFailure,m=g.handleSuccess,r=c.$;l--;var v=3-l-1,J=c.now();c.ajax("/vap/ew/componentbuilder",
{params:d,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=c.now()-J;h.postTimeMetric("vse_preLoaderHook:success:",b);h.postCountMetric("vse_preLoaderHook:success:"+d.page+":"+d.placement+":"+v);r(n).html(a);m(c,d,a)},error:function(a){h.postCountMetric("vse_preLoaderHook:error:"+d.page+":"+d.placement+":"+v);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<l?b(g,l):(h.postCountMetric("vse_preLoaderHook:error:",
1),q(c,d,a))}})}catch(y){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",y)}}return{get:function(a,h,c,n,d){b({A:a,block:h,request:c,handleFailure:d,handleSuccess:n},3)}}});v.register("vse_ns_lazyLoaderHook",function(){function b(g,l,c){try{var n=g.A,d=g.context,q=g.handleFailure,m=g.handleSuccess;l.attr("data-configuration");var r=atob(l.attr("data-configuration")),v=JSON.parse(r),J={pageContext:d,configuration:v},y=n.now();c--;var D=3-c-1;n.ajax("/vap/ew/subcomponent/"+v.type,{params:J,
paramsFormat:"json",method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=n.now()-y;h.postTimeMetric("vse_lazyLoaderHook:success:",b);h.postCountMetric("vse_lazyLoaderHook:success:"+d.page+":"+d.placement+":"+v.type+":"+D);l.html(a);m(n,J,a)},error:function(a){h.postCountMetric("vse_lazyLoaderHook:error:"+d.page+":"+d.placement+":"+v.type+":"+D);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(g,l,c):(h.postCountMetric("vse_lazyLoaderHook:error:",
1),q(n,J,a))}})}catch(L){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",L)}}return{get:function(a,h,c,n,d){var q=a.$;q(h+" div[data-configuration]").each(function(){b({A:a,context:c,handleFailure:d,handleSuccess:n},q(this),3)})}}});v.register("vse_ns_videoPlayer",function(){function b(g,l,c){try{var n=g.A,d=g.block,q=g.request,m=g.handleFailure,r=g.handleSuccess,v=n.$;c--;var J=3-c-1,y=n.now();n.ajax("/vap/ew/subcomponent/vseplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",
contentType:"application/json",timeout:q.timeout||5E3,withCredentials:!0,success:function(a){var b=n.now()-y;h.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);h.postCountMetric("vse_lightPlayerLoaderHook:success:"+q.page+":"+q.placement+":"+J);v(d).html(a);r(n,q,a)},error:function(a){h.postCountMetric("vse_lightPlayerLoaderHook:error:"+q.page+":"+q.placement+":"+J);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(g,c):(h.postCountMetric("vse_lightPlayerLoaderHook:error:",
1),m(n,q,a))}})}catch(D){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",D)}}return{get:function(a,h,c,n,d){b({A:a,block:h,request:c,handleFailure:d,handleSuccess:n},3)}}})});"use strict";v.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(h,a,b,g,l){var c=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,d=0,h;for(h in a)a[h]&&a[h].length&&(d+=a[h].length);a="image_size_bucket:gt"+c[c.length-1];for(h=1;h<c.length;h++)if(d<=
c[h]){a="image_size_bucket:"+c[h-1]+"-"+c[h];break}l.postCountMetric(a);g.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,r.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=b.lazyLoadExperienceDisabled;g.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(l.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),g.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});v.when("A","get-resource-time","postMetric","afterLoad").execute(function(h,
a,b){var g=h.state("desktop-landing-image-data");g&&(g=h.values(g),a=a.getResourceTimeByName("img",g),h.each(a,function(a){a&&(a.responseEnd!=ea&&b.postCountMetric("ibDesktopLandingImageDownloadTime",r.parseInt(a.responseEnd)),a.transferSize!=ea&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",r.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});v.now().register("ImageBlockShoppableSceneView",
function(){function h(){}return function(){this.update=this.render=h}});v.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(f){var c=window.AmazonUIPageJS||window.P,k=c._namespace||c.attributeErrors,d=k?k("DetailPageShowroomImageBlockAssets",""):c;d.guardFatal?d.guardFatal(f)(d,window):d.execute(function(){f(d,window)})})(function(f,c,k){f.when("A","imageBlockUtils","imageBlockImmersiveViewUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(d,e,h,n,g,b,a){function q(a){a=
l.colorToAsin[a.color].asin;a||(a=l.mediaAsin);return a}function f(){try{var b=document.getElementById("iv-tab-view-container");(new MutationObserver(function(){if(c.ue&&ue.trigger&&!k){var a=q(m.getCurrentItem());a=n.getDataForAsin(a);y?ue.trigger("HIT_SHOWROOM_DESKTOP_DP_ATF_LITE_IMAGE_BLOCK_EXPERIMENT_231753",a.experimentTreatment||"T1"):ue.trigger("HIT_SHOWROOM_DESKTOP_DP_ATF_LITE_IMAGE_BLOCK_EXPERIMENT_231753","C")}k=!0})).observe(b,{attributes:!0})}catch(D){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER)}}
var r=void 0,l=void 0,m=void 0,t=void 0,z=void 0,p=void 0,w=void 0,k=!1,y=!1;return function(h,c,k,x){k=new Date;r=this;l=h;m=c;t=x;d.on(b.TWISTER_DATA_EVENT,function(a){q(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},t.dispatch("updateView",a))});l.asinShowroomEnabled&&f();r.render=function(b,e,h,c,f,l){b=new Date;z=c;p=f.find("#main-showroom-container");p.parent().find("#showroom-canvas-caption");d.$("#main-image-container");try{var u=q(m.getCurrentItem());if(n.isDataValidForAsin(u)){var k=
new Date,v=n.getDataForAsin(u);g.refresh(t,v.asin,v.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-k);if(!l){var r=new Date;g.updateMainImage(p,v.imageData,t);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-r)}var x=new Date;e=g.createThumbnail(c,e,v.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-x);var A=new Date;d.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-A);if(u!==w){var B=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=a.createShowroomAtfEvent(v.defaultStageId,u,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);w=u;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-B)}y=!0}else d.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(F){d.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return e};r.update=function(d){var h=new Date;try{var c=d.data;m.setCurrentEvent(d);if(c.type===b.SHOWROOM_THUMBNAIL_TYPE){var f=new Date;c.interaction=d.type;c.isUserGenerated=!0;if(n.isDataValidForAsin(q(c))){"mouseenter"===c.interaction&&c.type===b.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var k=n.getDataForAsin(q(c)).imageData;g.updateMainImage(p,k,t);g.showShowroomMainImage(p)}l.usePeekHover&&"click"!==d.type||
(e.selectGivenThumbnail(d.$declarativeParent,z),"click"===d.type&&e.useTabbedImmersiveView(l)&&g.handleShowroomThumbnailClick(d));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-f)}else c.type!==b.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===d.type?c.color===m.getCurrentItem().color&&m.getCurrentItem().type===b.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(p):g.hideShowroomMainImage(p):g.hideShowroomMainImage(p))}catch(E){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-h)};(h=document.getElementById("ivShowroomTabHeading"))&&h.addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=n.getDataForAsin(w).defaultStageId;b=a.createShowroomAtfEvent(b,w,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-k)}});"use strict";f.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";f.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-atf-metrics").register("showroom-image-block-detail-page-rendering",function(d,c,h,n,g,b){function a(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);
var c=b.createShowroomAtfEvent(l,f,b.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)}function e(a){a.action="showroomIngressClick";a.data=m;k.dispatch("showroomIngressClick",a)}var f,k,l,m;return{createThumbnail:function(a,b,c){m={type:"showroomIngress",index:0,thumbnailIndex:b,variant:c.variant};h.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:b,variant:c.variant},c.thumb,a,"showroom-imageblock-thumbnail");return b},updateMainImage:function(b,
e){var h=b.find("#showroom-main-image");h.length?h.attr("src",e.hiRes):(h=c("\x3cimg/\x3e").attr("src",e.hiRes).attr("id","showroom-main-image"),h.appendTo(b),d.declarative.create(b,"showroom-image-action",m),d.declarative("showroom-image-action",["click"],a),e=b.find("#showroom-main-image-overlay-container"),e.length||(e=n.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),h=n.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),e=c('                \x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+
(h?h:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+e+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),e.appendTo(b)))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return c("#showroom-outer-container").hasClass("aok-hidden")},
handleShowroomIngressClick:e,handleShowroomThumbnailClick:function(a){b.addOne(b.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var c=b.createShowroomAtfEvent(l,f,b.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,b.STATUS_TYPES.SUCCESS);b.logShowroomAtfEvent(c);e(a)},handleShowroomMainImageClick:a,refresh:function(a,b,c){k=a;f=b;l=c}}});"use strict";f.when("A").register("showroom-image-block-metrics",function(d){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",
IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger"},
STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",
SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(e){try{if(c.ue&&e){var d=(c.ue.count(e)||0)+1;c.ue.count(e,d)}}catch(n){}},logValue:function(e,d){try{c.ue&&e&&"number"===typeof d&&c.ue.count(e,d)}catch(n){}},createShowroomAtfEvent:function(c,h,f,g){var b={};b.showroomId=c;b.asin=h;b.eventType=f;b.status=g;b.device=d.capabilities?d.capabilities.isAmazonApp?"AmazonApp":d.capabilities.mobile?"mobile":d.capabilities.tablet?
"tablet":"desktop":"";b.userAgent=navigator?navigator.userAgent:"";b.producerId="showroom_atf";b.schemaId="com.amazon.showroom.ingress.clientEvent.3";return b},logShowroomAtfEvent:function(d){try{c.ue&&c.ue.event&&d&&c.ue.event(d,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(h){}}}});"use strict";f.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,e){function d(){return g[b]}function f(a){return a in g}var g={},b;return{setData:function(a){a&&
a.asin&&a.imageDomain&&a.defaultCollageUrl&&a.defaultStageId&&Array.isArray(a.itemMainImagePhysicalIds)&&(b=a.asin,f(a.asin)||(g[a.asin]=a,c.trigger(e.TWISTER_DATA_EVENT,a.asin)))},getDataForCurrentAsin:d,getDataForAsin:function(a){return g[a]},getStringValue:function(a){return d().displayStrings?d().displayStrings[a]:""},isDataValidForAsin:f}})});
/* ******** */
